---

- hosts: all
  become: yes

  tasks:
    - name: install fail2ban
      become: yes
      become_method: sudo
      command: 
        cmd: sudo apt update && sudo apt install fail2ban -y 

    - name: copy fail2ban configfiles
      become: yes
      become_method: sudo
      command: 
        cmd: sudo cp configfiles/debian-sshd-default.conf /etc/fail2ban/jail.d/debian-sshd-default.conf

    - name: restart fail2ban
      become: yes
      become_method: sudo
      command: 
        cmd: sudo systemctl restart fail2ban
